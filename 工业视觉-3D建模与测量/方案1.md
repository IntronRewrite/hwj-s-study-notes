# 聚类+边界框对齐+ICP

> [!NOTE]
>
> 读取src点云数据成功
> 读取ref点云数据成功
> 点云的平均距离: 1.8126511386464113
> [Open3D DEBUG] Precompute neighbors.
> Precompute neighbors.[========================================] 100%
> [Open3D DEBUG] Done Precompute neighbors.
> [Open3D DEBUG] Compute Clusters
> Clustering[========================================] 100%
> [Open3D DEBUG] Done Compute Clusters: 16
> point cloud has 16 clusters
> 欧式聚类成功
> 保留点最多的一个聚类成功
> **聚类时间135.56秒**
> 获取src定向边界框成功
> src可视化成功
> 获取ref定向边界框成功
> ref点云和定向边界框已移动到原点
> src点云和定向边界框已移动到原点
> **粗配准时间2.08秒**
> src点云和定向边界框已旋转对齐ref
> ICP 变换矩阵:
> [[ 9.99999682e-01  3.29970815e-04 -7.26212063e-04  1.23663935e-02]
>  [-3.29032153e-04  9.99999111e-01  1.29228600e-03  5.51283288e-02]
>  [ 7.26637834e-04 -1.29204664e-03  9.99998901e-01 -7.43804473e-01]
>  [ 0.00000000e+00  0.00000000e+00  0.00000000e+00  1.00000000e+00]]
> **精配准时间192.96秒**
> src点云和ref点云精配准成功

聚类时间135.56秒

精配准时间192.96秒



> [!NOTE]
>
> 读取src点云数据成功
> src点云的点数量: 8267478
> 读取ref点云数据成功
> ref点云的点数量: 1019962
> 点云加载运行时间: 3.80677 秒
> 点云的平均距离: 1.81265
> Precompute neighbors.[========================================] 100%
> Clustering[========================================] 100%
> 点云有 16 个聚类
> 欧式聚类成功
> 数量最多的聚类标签: 9
> 保留数量最多的聚类成功
> 聚类运行时间: 98.4077 秒
> 数量最多的聚类可视化成功
> 获取src定向边界框成功
> 获取ref定向边界框成功
> 定向边界框可视化成功
> 点云和定向边界框已移动到原点
> 平移后的点云和定向边界框可视化成功
> src点云和定向边界框已旋转对齐ref
> 粗配准运行时间: 1.85786 秒
> 旋转对齐后的点云和定向边界框可视化成功

**<u>最终效果</u>**

![image-20241124151817104](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528296.png)

## 对src聚类，去除离群点

![image-20241124150826341](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528298.png)

## 保留点最多的一类

![image-20241124150918898](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528299.png)

## 绘制边界框

![image-20241124150940420](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528300.png)

![image-20241124151006268](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528301.png)



## 移动到原点

![image-20241124151026973](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528302.png)



## 旋转对齐

![image-20241124151041844](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411241528303.png)

## icp精校

ICP 变换矩阵:
[[ 9.99999986e-01  1.52907717e-04 -6.43038313e-05  7.53370533e-02]
 [-1.52908094e-04  9.99999988e-01 -5.85090849e-06  3.33167767e-02]
 [ 6.43029359e-05  5.86074098e-06  9.99999998e-01 -8.69233517e-02]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00  1.00000000e+00]]

![image-20241124151807955](F:\paln1.png)



## 评价

> [!NOTE]
>
> **比较看粗配准效果**

