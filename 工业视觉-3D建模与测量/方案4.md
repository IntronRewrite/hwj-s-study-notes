下采样+聚类+预处理+4pcs+ICP

~~~C++
读取src点云数据成功
src点云的点数量: 8267478
读取ref点云数据成功
ref点云的点数量: 1019962
点云加载运行时间: 2.51325 秒
均匀采样src点云成功，采样后点数量: 82675
均匀采样ref点云成功，采样后点数量: 1020
均匀采样运行时间: 0.0204613 秒
点云的平均距离: 5.01443
Precompute neighbors.[========================================] 100%
Clustering[========================================] 100%
采样后的点云有 35 个聚类
采样后的点云欧式聚类成功
聚类运行时间: 0.148516 秒
采样后的聚类结果可视化成功
数量最多的聚类标签: 10
保留数量最多的聚类成功
选出相邻点成功
合并neighbor_pcd和largest_cluster_pcd_sampled成功
聚类选择运行时间: 9.44049 秒
获取src定向边界框成功
获取ref定向边界框成功
定向边界框可视化成功
点云和定向边界框已移动到原点
平移后的点云和定向边界框可视化成功
src_rotation:
  0.992942 -0.0976602 -0.0672963
-0.0999787  -0.994475 -0.0319847
 0.0638009 -0.0384872    0.99722
ref_rotation:
-0.0328222   -0.99929 -0.0185144
  0.771761 -0.0135697  -0.635768
  0.635065  -0.035156   0.771658
src点云和定向边界框已旋转对齐ref
粗配准运行时间: 1.63293 秒
src点云和定向边界框已绕长轴旋转180度
旋转对齐后的点云和定向边界框可视化成功
4PCS配准运行时间: 170.586 秒
4PCS配准结果转换矩阵:
  0.991223   0.109831  0.0735768    45.4658
 -0.108971   0.993922 -0.0156166   -34.6935
-0.0748448 0.00746178   0.997167   -21.7786
         0          0          0          1
4PCS配准结果可视化成功
精配准运行时间: 128.923 秒
精配准结果转换矩阵:
   0.999958 -0.00830867  0.00376156      1.1151
 0.00825482    0.999866    0.014111     31.4785
-0.00387831  -0.0140794    0.999893     18.9579
          0           0           0           1
精配准结果可视化成功
~~~



![image-20241125071350394](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411250731485.png)

![image-20241125072100932](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411250731488.png)

![image-20241125072347493](https://admin-hwj.oss-cn-beijing.aliyuncs.com/img/202411250731489.png)

~~~mermaid
graph TD
    A[读取src点云数据] --> B[读取ref点云数据]
    B --> C[均匀采样src点云]
    C --> D[均匀采样ref点云]
    D --> E[计算平均距离]
    E --> F[欧式聚类]
    F --> G[保留数量最多的聚类]
    G --> H[选出相邻点]
    H --> I[合并neighbor_pcd和largest_cluster_pcd_sampled]
    I --> J[获取src定向边界框]
    J --> K[获取ref定向边界框]
    K --> L[点云和定向边界框移动到原点]
    L --> M[旋转对齐src和ref]
    M --> N[4PCS配准]
    N --> O[精配准]
    O --> P[应用精配准结果]
    P --> Q[可视化精配准结果]

    subgraph 时间节点
        A1[点云加载运行时间: 2.51325 秒]
        A2[均匀采样运行时间: 0.0204613 秒]
        A3[聚类运行时间: 0.148516 秒]
        A4[聚类选择运行时间: 9.44049 秒]
        A5[粗配准运行时间: 1.63293 秒]
        A6[4PCS配准运行时间: 170.586 秒]
        A7[精配准运行时间: 128.923 秒]
    end

    A --> A1
    D --> A2
    F --> A3
    I --> A4
    M --> A5
    N --> A6
    O --> A7
~~~

