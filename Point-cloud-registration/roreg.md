# 精读深度学习点云论文指南

##  摘要



### 论文标题

RoReg: Pairwise Point Cloud Registration With Oriented Descriptors and Local Rotations

### 摘要

这篇论文介绍了一个名为RoReg的新型点云配准框架，该框架充分利用了有向描述符和估计的局部旋转信息。传统的点云配准方法主要关注提取旋转不变描述符，但往往忽略了描述符的方向性。作者展示了有向描述符和估计的局部旋转在特征描述、特征检测、特征匹配和变换估计等整个配准流程中的重要作用，并设计了一种新的有向描述符RoReg-Desc来估计局部旋转。这种估计的局部旋转使得开发旋转引导检测器、旋转一致性匹配器和单次估计RANSAC成为可能，所有这些方法都显著提高了配准性能。广泛的实验表明，RoReg在广泛使用的3DMatch和3DLoMatch数据集上取得了最先进的性能，并且也很好地泛化到了室外ETH数据集上。特别是，作者还对RoReg的每个组件进行了深入分析，验证了有向描述符和估计的局部旋转带来的改进。

### 核心贡献

- 提出了一种新的点云配准框架RoReg，该框架在整个配准流程中充分利用了有向描述符和估计的局部旋转。
- 设计了一种新的有向描述符RoReg-Desc，并应用于估计局部旋转。
- 开发了旋转引导检测器、旋转一致性匹配器和一次估计RANSAC，这些都是基于估计的局部旋转实现的，显著提高了配准性能。
- 在多个数据集上进行了广泛的实验，证明了RoReg相较于现有方法在点云配准任务上的优越性能。

- **关键词**：记录关键概念，如卷积神经网络（CNN）、图神经网络（GNN）、Transformer、点云等。

## 引言

### 背景信息

#### 研究问题领域

本论文研究的是3D点云配准领域，具体而言，是**成对点云配准**（pairwise point cloud registration）。点云配准是3D重建、姿态估计、增强现实/虚拟现实（AR/VR）和自动驾驶等多个任务的前提条件。

#### 研究动机及其重要性

**<u>研究动机</u>**

传统的点云配准方法在特征描述阶段主要依赖于提取旋转不变描述符（rotation-invariant descriptors），但现有方法普遍存在以下问题：

- **描述符方向性缺失**：描述符的方向信息在配准过程中被忽略，导致配准性能受限。
- **对噪声和点云密度变化敏感**：现有方法在噪声和点云密度不均匀的情况下难以学习到鲁棒的模型。
- **特征匹配困难**：在具有重复模式、噪声和点密度变化的挑战性区域中，找到正确的匹配对应关系仍然是一个难题。

**<u>研究重要性</u>**

为了解决上述问题，论文提出了RoReg框架，其研究动机和重要性可以总结为以下几点：

- **利用有向描述符和局部旋转**：通过编码局部方向信息，利用估计的局部旋转来改进配准流程中的各个阶段，包括特征描述、特征检测、特征匹配和变换估计。
- **提高配准性能**：通过设计的RoReg-Desc描述符和估计的局部旋转，开发出旋转引导检测器、旋转一致性匹配器和一次估计RANSAC，显著提高了配准的准确性和鲁棒性。
- **泛化能力强**：RoReg不仅在训练集类似的数据集上表现优异，而且能够很好地泛化到不同传感器获取的大规模场景，如室外ETH数据集。

### 现有局限

#### 现有方法的不足之处

根据论文引言部分，当时现有方法主要有以下不足：

1. **旋转不变描述符的局限性**：
   - 传统方法主要关注提取旋转不变的描述符，但这些描述符通常依赖于局部参考框架（Local Reference Frame, LRF）或手工设计的旋转不变特征，这些方法既不稳定也不具有区分性，尤其在噪声或密度变化的情况下。
2. **对噪声和点密度变化的敏感性**：
   - 由于重复模式、噪声和点密度的不均匀性，学习鲁棒的模型非常具有挑战性。
3. **特征匹配困难**：
   - 在具有重复模式、噪声和点密度变化的挑战性区域中，找到正确的匹配对应关系仍然困难。
4. **变换估计的挑战**：
   - 在变换估计阶段，由于错误的匹配对应关系，很难从众多错误的变换中选择正确的变换。

#### 论文试图解决的痛点

论文试图解决上述痛点，具体目标如下：

1. **利用有向描述符和局部旋转**：
   - 论文提出了一种新的点云配准框架RoReg，该框架利用有向描述符和估计的局部旋转来改进配准流程。
2. **提高配准流程的鲁棒性**：
   - 通过设计的RoReg-Desc描述符和估计的局部旋转，开发出旋转引导检测器、旋转一致性匹配器和一次估计RANSAC，以提高配准性能。
3. **提高配准的准确性**：
   - 通过利用局部旋转，使得在只有单个对应关系的情况下也能估计出正确的变换，从而显著提高了配准成功率，尤其是在重叠比例低且只能建立少量正确对应关系的情况下。
4. **增强泛化能力**：
   - RoReg不仅在训练集类似的数据集上表现优异，而且能够很好地泛化到不同传感器获取的大规模场景，如室外ETH数据集。

通过这些改进，论文旨在提供一个更加鲁棒和准确的点云配准解决方案，以应对现有方法在复杂环境下的不足。

### 创新点

#### 论文提出的新方法或观点

该论文提出了一个名为RoReg的新型点云配准框架，该框架的核心贡献和新方法包括：

1. **RoReg-Desc描述符**：
   - 提出了一种新的有向描述符RoReg-Desc，它基于二十面体群（icosahedral group）的特征映射，能够同时保持旋转等变性和旋转不变性。这种描述符不仅编码了点的局部几何信息，还包含了方向信息，为后续的配准流程提供了更加丰富和鲁棒的特征表示。
2. **局部旋转估计**：
   - 利用RoReg-Desc描述符中的旋转等变部分，估计出匹配点之间的局部旋转。这种局部旋转的估计对于后续的配准流程至关重要，因为它提供了关于点云之间相对姿态的直接信息。
3. **旋转引导的检测器**：
   - 设计了一种旋转引导的检测器，它利用估计的局部旋转来筛选出具有明确方向和可估计局部旋转的关键点，提高了检测器的重复性和匹配性。
4. **旋转一致性匹配器**：
   - 提出了一种基于变换器（transformer）的匹配器，它利用局部旋转的一致性来改进特征匹配的质量，从而提高了匹配器的准确性。
5. **一次估计RANSAC（OSE-RANSAC）**：
   - 开发了一种基于局部旋转的一次估计RANSAC算法，它能够直接从一对匹配点估计出全局刚体变换，大大减少了搜索空间并提高了配准质量。

#### 明显的改进方向

论文中提出的RoReg框架明显改进了点云配准的以下几个方面：

1. **提高配准的鲁棒性**：
   - 通过使用有向描述符和局部旋转，RoReg框架能够在噪声和点密度变化的情况下提供更鲁棒的配准性能。
2. **提升配准的准确性**：
   - 利用局部旋转信息，RoReg能够更准确地估计点云之间的相对姿态，从而提高了配准的准确性。
3. **增强泛化能力**：
   - RoReg框架不仅在室内数据集上表现良好，而且在室外数据集上也展现出了良好的泛化能力，这表明其设计的普适性和适用性。
4. **简化配准流程**：
   - 通过一次性估计RANSAC，RoReg简化了配准流程，减少了计算量，同时提高了配准效率。

综上所述，RoReg框架通过引入有向描述符和局部旋转的概念，为点云配准领域提供了新的研究方向和改进方法。

复制再试一次分享



## 研究方法

### 模型结构

RoReg模型的整体架构包含以下几个关键部分，其设计充分利用了有向描述符和估计的局部旋转，以提高点云配准的准确性和鲁棒性：

#### RoReg-Desc特征提取

- **旋转等变特征提取**：首先，模型通过Group Feature Extractor提取每个点的局部3D邻域特征，并通过Group Feature Embedder进一步处理这些特征，生成具有旋转等变性的特征（记为F*F*）。
- **旋转不变描述符**：通过在这些旋转等变特征上应用平均池化（average pooling），生成旋转不变的描述符（记为d*d*）。

#### 局部旋转估计

- **粗略旋转估计**：通过比较两组特征之间的排列差异，估计出一个粗略的旋转Rc*R**c*。
- **精细旋转估计**：使用回归器进一步细化这个旋转，得到更精确的局部旋转Rϵ*R**ϵ*。

#### 旋转引导的检测器

- **关键点检测**：基于RoReg-Desc特征和局部旋转信息，设计旋转引导的检测器来识别和选择具有明确方向和可估计局部旋转的关键点。

####  旋转一致性匹配器

- **特征匹配**：利用旋转一致性层（Rotation Coherence Layer）来提取和匹配不同点的局部旋转信息，从而提高匹配准确性。

#### 一次估计RANSAC（OSE-RANSAC）

- **变换估计**：利用估计的局部旋转和匹配点对的平移信息，直接生成全局刚体变换的假设，大大减少了搜索空间。



### 核心创新

该论文的核心创新可以概括为以下几点：

1. **RoReg-Desc描述符**：
   - 提出了一种新颖的有向描述符（oriented descriptor），名为RoReg-Desc，它基于二十面体群（icosahedral group）的特征映射，能够同时保持旋转等变性和旋转不变性。这种描述符不仅编码了点的局部几何信息，还包含了方向信息，为后续的配准流程提供了更加丰富和鲁棒的特征表示。
2. **局部旋转估计**：
   - 利用RoReg-Desc描述符中的旋转等变部分，估计出匹配点之间的局部旋转。这种局部旋转的估计对于后续的配准流程至关重要，因为它提供了关于点云之间相对姿态的直接信息。
3. **旋转引导的检测器**：
   - 设计了一种旋转引导的检测器，它利用估计的局部旋转来筛选出具有明确方向和可估计局部旋转的关键点，提高了检测器的重复性和匹配性。
4. **旋转一致性匹配器**：
   - 提出了一种基于变换器（transformer）的匹配器，它利用局部旋转的一致性来改进特征匹配的质量，从而提高了匹配器的准确性。
5. **一次估计RANSAC（OSE-RANSAC）**：
   - 开发了一种基于局部旋转的一次估计RANSAC算法，它能够直接从一对匹配点估计出全局刚体变换，大大减少了搜索空间并提高了配准质量。

这些创新点共同构成了RoReg框架，显著提高了点云配准的准确性和鲁棒性，特别是在处理具有挑战性的配准任务时。通过引入有向描述符和局部旋转信息，RoReg框架为点云配准领域提供了新的研究方向和改进方法。****

### 数学公式

在论文中，数学公式被用来详细描述RoReg框架中各个关键组件的计算过程。以下是一些核心数学公式及其在论文中的解释：

#### 局部旋转估计（Local Rotation Estimation）

局部旋转 \( R(p,q) \) 是通过比较两个匹配点 \( p \) 和 \( q \) 的特征向量 \( Fp \) 和 \( Fq \) 来估计的。这个过程可以通过以下公式表示：

$$
\left[ R_c = \arg\min_{g \in G} \| F_q - P_g \circ F_p \|_2 \right]
$$
这里，$R_c$ 是粗略的旋转估计， $g$ 是二十面体群  $G$  中的元素，$P_g$  表示由  $g$  引起的排列，$\circ$ 表示函数复合。

#### 精细旋转估计（Refined Rotation Estimation）

精细旋转是通过一个回归器来计算的，该回归器使用特征向量之间的差异来预测旋转残差。公式如下：

$$
\text{Quat}(R_\epsilon) = \eta([F_q; PR_c \circ F_p])
$$
这里，$[F_q; PR_c \circ F_p]$ 表示将  $F_q$ 和  $PR_c \circ F_p$  连接起来的特征向量，$\eta$  是一个多层感知机$MLP$，用于从特征向量中回归出旋转四元数 $ R_\epsilon $。

####  旋转一致性匹配器（Rotation Coherence Matcher）

旋转一致性匹配器使用旋转特征向量来提取旋转一致性信息，这有助于改进特征匹配的质量。匹配得分 $ S $ 可以通过以下公式计算：

$$
S(i, j) = \frac{\exp(d(M_{pi}) \cdot d(M_{qj}))}{\sum_{k}\exp(d(M_{pi}) \cdot d(M_{qk}))}
$$
这里，$ d(M_{pi}) $ 和 $ d(M_{qj})$ 分别表示点  $i$  和  $j$  的特征向量，$S(i, j)$  表示点  $i$  和  $j$  之间的匹配得分。

####  一次估计RANSAC（OSE-RANSAC）

OSE-RANSAC 使用估计的局部旋转来直接从一对匹配点生成全局刚体变换的假设。变换 \( (R, t) \) 可以通过以下公式计算：

$$
(R, t) = \arg\min_{R,t \in SE(3)} \sum_{k \in \text{Inlier}} Sk \| q_k - R p_k - t \|^2
$$
这里，$R$ 和 t 是旋转和平移参数，$Sk$  是匹配得分，$p_k$ 和 $q_k$  是匹配点对。

这些公式是RoReg框架中关键组件的计算基础，它们使得框架能够有效地处理点云配准任务，即使在具有挑战性的条件下也能提供准确的配准结果。

## 实验设计

### 数据集

论文中的实验部分使用了以下数据集来评估RoReg框架的性能：

####  3DMatch数据集

- **来源**：由多个现有数据集收集而来的62个室内场景。
- **构成**：包含54个训练场景和8个测试场景。
- **数据特点**：每个点云扫描是通过融合50个连续的深度帧生成的。
- **测试分割**：在3DMatch的测试分割上，选择了1,623对具有超过30%重叠比例的扫描对进行评估。

#### 3DLoMatch数据集

- **来源**：3DMatch测试集的扩展。
- **构成**：选择了1781对具有10%到30%重叠比例的扫描对。
- **数据特点**：用于评估在低重叠情况下配准方法的性能。

####  ETH数据集

- **来源**：由Hokuyo UTM-30LX激光扫描仪收集的4个室外场景。
- **构成**：包含132个扫描和713对扫描对。
- **数据特点**：包含许多树木和一些小型设施，如凉亭，对点云配准极具挑战性。
- **用途**：主要用于测试模型的泛化能力。

####  训练集

- **说明**：模型在3DMatch训练集上进行训练，并在上述数据集上进行评估。

### 对比实验

在**IV. EXPERIMENTS**部分，作者进行了广泛的实验来比较RoReg框架与现有的点云配准方法。以下是一些关键的比较结果和定量分析：

####  与基于特征的方法比较

与当前最先进的基于特征的方法（如PerfectMatch、FCGF、LMVD、EPN、SpinNet等）进行比较，RoReg在配准质量上取得了显著提升。具体数据如下：

- **Registration Recall (RR)**：
  - RoReg在3DMatch数据集上的RR达到了93.2%，相比EPN的87.5%和SpinNet的89.7%有显著提升。
  - 在3DLoMatch数据集上，RoReg的RR达到了71.2%，远高于EPN的58.3%和SpinNet的60.4%。
- **Inlier Ratio (IR)**：
  - RoReg在3DMatch数据集上的IR为78.5%，在3DLoMatch数据集上的IR为63.2%，均高于对比方法。

这些结果表明，RoReg在配准精度上相较于现有方法有显著提高。

#### 与直接配准方法比较

RoReg与直接配准方法（如DCP、PointNetLK、FGR、DGR、DHVR、PointDSC等）的比较结果如下：

- **Transformation Recall (TR)**：
  - RoReg在3DMatch数据集上的TR达到了95.6%，在3DLoMatch数据集上的TR达到了86.3%，均高于直接配准方法。
- **Rotation Error (RE) 和 Translation Error (TE)**：
  - RoReg在成功配对的扫描对上估计的旋转误差（RE）平均为5.2度，平移误差（TE）平均为0.12米，均低于直接配准方法。

这些结果表明，RoReg在直接配准方法中也表现出色，尤其是在处理具有挑战性的低重叠点云时。



### 消融实验

#### 消融实验设置

在**IV. EXPERIMENTS**部分，作者进行了一系列消融实验来评估RoReg框架中各个组件的贡献。消融实验的设置如下：

1. 基线模型

- **设置**：使用FCGF（Fully Convolutional Geometry Feature）作为特征提取器，并采用传统的RANSAC算法进行配准。
- **目的**：作为对照组，展示在RoReg框架中引入新组件前后的性能差异。

2. RoReg-Desc描述符

- **设置**：在基线模型基础上，引入RoReg-Desc描述符，该描述符具有旋转等变性和旋转不变性。
- **目的**：评估RoReg-Desc描述符对配准性能的影响。

3. 旋转引导检测器

- **设置**：在包含RoReg-Desc描述符的基础上，引入旋转引导检测器，该检测器利用估计的局部旋转来筛选关键点。
- **目的**：分析旋转引导检测器对关键点检测和配准性能的影响。

4. 旋转一致性匹配器

- **设置**：在包含旋转引导检测器的基础上，引入旋转一致性匹配器，该匹配器利用局部旋转的一致性来改进特征匹配。
- **目的**：评估旋转一致性匹配器对特征匹配质量和最终配准性能的影响。

5. OSE-RANSAC

- **设置**：在包含旋转一致性匹配器的基础上，引入一次估计RANSAC（OSE-RANSAC），该算法利用估计的局部旋转直接生成全局刚体变换的假设。
- **目的**：测试OSE-RANSAC在变换估计阶段的作用和对最终配准性能的贡献。

6. 组件组合

- **设置**：将上述所有组件组合在一起，形成完整的RoReg框架。
- **目的**：评估所有组件协同工作对整体配准性能的提升。



#### 各模块对整体模型的作用分析

RoReg-Desc描述符

- **作用**：提供了旋转等变性和旋转不变性的特征表示，增强了特征描述符的区分能力，为后续的配准流程提供了更加丰富和鲁棒的特征。

旋转引导检测器

- **作用**：通过估计的局部旋转来筛选关键点，提高了检测器的重复性和匹配性，使得检测到的关键点更具代表性和可匹配性。

旋转一致性匹配器

- **作用**：利用局部旋转的一致性来改进特征匹配的质量，提高了匹配器的准确性，使得匹配对应关系更加可靠。

OSE-RANSAC

- **作用**：利用估计的局部旋转直接生成全局刚体变换的假设，减少了搜索空间并提高了配准质量，尤其是在处理低重叠点云时表现出显著的优势。

通过消融实验，作者证明了RoReg框架中每个组件都对提高配准性能起到了关键作用，并且协同工作可以显著提升整体的配准效果。这些实验结果也验证了RoReg框架的有效性和鲁棒性。



### 评价指标

**<u>评价指标及其对模型性能的意义</u>**

在**IV. EXPERIMENTS**部分，作者使用了多个评价指标来衡量RoReg框架的性能。以下是所用评价指标及其对模型性能意义的详细描述：

1. Registration Recall (RR)

- **定义**：正确对齐的扫描对所占的百分比。
- **意义**：反映了模型在多大程度上能够准确地估计出点云之间的相对位姿，是衡量配准算法性能的最主要指标。

2. Transformation Recall (TR)

- **定义**：成功估计出正确变换的扫描对所占的百分比。
- **意义**：用于比较RoReg与直接配准方法，特别是在成功配对的扫描对上估计的旋转误差（RE）和平移误差（TE）的平均值。

3. Inlier Ratio (IR)

- **定义**：正确对应点的比例。
- **意义**：衡量了特征匹配的质量，即正确匹配的点对占所有匹配点对的百分比，反映了模型对噪声和异常值的鲁棒性。

4. Feature Matching Recall (FMR)

- **定义**：具有较高匹配质量的扫描对所占的百分比。
- **意义**：表示有多少比例的扫描对拥有足够的内点比例，从而确保RANSAC能够找到正确的变换，是衡量特征匹配算法鲁棒性的重要指标。

5. Rotation Error (RE) 和 Translation Error (TE)

- **定义**：旋转误差和平移误差。
- **意义**：分别衡量了估计的旋转矩阵与真实旋转矩阵之间的差异以及估计的平移向量与真实平移向量之间的差异。这些指标用于评估配准结果的准确性。

6. Runtime Analysis

- **定义**：模型运行时间。
- **意义**：反映了模型处理点云数据的效率，包括特征描述、检测、匹配和变换估计等各个阶段的时间消耗。

7. Ablation Study

- **定义**：消融实验，逐步移除RoReg框架中的某些组件，观察对最终性能的影响。
- **意义**：通过比较完整模型与去掉某些组件的模型之间的性能差异，可以量化每个组件对整体性能的贡献。

这些评价指标共同构成了一个全面的评价体系，不仅衡量了模型的准确性，还考虑了模型的鲁棒性和效率。通过这些指标，可以全面地评估RoReg框架的性能，并与其他方法进行比较。





## 局限性与未 来 工 作

**<u>RoReg的局限性</u>**

RoReg框架虽然在点云配准任务中表现出色，但仍存在一些局限性：

1. **平面点方向模糊性**：
   - 当两个部分扫描的重叠区域主要由平面点组成时，由于平面点的方向模糊性，RoReg可能无法找到正确的局部旋转。如图20所示，这可能导致配准失败。

2. **计算效率**：
   - 尽管RoReg总体上计算效率高，但由于骨干网络需要进行60次前向传递，RoReg-Desc的构建效率较低。在补充材料中，我们证明了采用较小的组可以显著提升速度，但代价是性能下降。

**<u>潜在的加速技术</u>**

为了解决RoReg的局限性，可以考虑以下潜在的加速技术：

- **限制旋转范围**：
  - 将旋转从SO(3)限制到SO(2)，这可以显著减少计算量，但可能会牺牲一些性能。

- **先进的旋转等变学习技术**：
  - 采用更先进的旋转等变学习技术，如[80]、[105]中提到的技术，可以提高RoReg-Desc的构建效率，同时保持或提升配准性能。

这些潜在的加速技术为未来的工作提供了新的方向，旨在进一步提高RoReg框架的效率和适用性。

## 进一步思考

- **对比与总结**：比较该论文与相关工作的异同，总结其独特贡献。
- **复现与改进**：思考复现论文的可行性，分析可能遇到的困难或改进的潜在方案。
- **应用场景**：设想论文方法的实际应用场景，并考虑其在相关任务中的潜在价值。

